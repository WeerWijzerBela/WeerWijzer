schedules:
- cron: '*/10 * * * *'
  displayName: runs every ten minutes
  branches:
    include:
    - master
  always: 'false'

trigger:
- master

pool:
  vmImage: ubuntu-latest

stages:
- stage: Development
  jobs:
  - job: Build
    steps:
    - script: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
      displayName: 'Install dependencies'
    - script: |
        python3 metingen.py
      env:
        DB_HOST: ${env:DB_HOST}
        DB_NAME: ${env:DB_NAME}
        DB_PORT: ${env:DB_PORT}
        DB_USER: ${env:DB_USER}
        DB_PASSWORD: ${env:DB_PASSWORD}
      displayName: 'Run Python script'

# resources:
#   pipelines:
#   - pipeline: mainpipeline # Name of the pipeline resource.
#     source: security-lib-ci # The name of the pipeline referenced by this pipeline resource.
#     trigger: 'true' 

